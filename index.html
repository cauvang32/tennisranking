<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/tennis.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tennis Ranking System</title>
  </head>
  <body>
    <div id="app">
      <header>
        <h1>üéæ Tennis Si√™u l√†nh m·∫°nh </h1>
        <p>H·ªá th·ªëng x·∫øp h·∫°ng tennis ƒë√¥i</p>
        <div class="admin-controls admin-only">
          <button id="backupData" class="backup-btn">üíæ Sao l∆∞u d·ªØ li·ªáu</button>
          <button id="restoreData" class="restore-btn">üì• Kh√¥i ph·ª•c d·ªØ li·ªáu</button>
          <button id="clearAllData" class="danger-btn">üóëÔ∏è X√≥a t·∫•t c·∫£ d·ªØ li·ªáu</button>
        </div>
      </header>

      <main>
        <div class="tabs">
          <button class="tab-button admin-only" data-tab="players">Qu·∫£n l√Ω ng∆∞·ªùi ch∆°i</button>
          <button class="tab-button editor-only" data-tab="matches">Tr·∫≠n ƒë·∫•u</button>
          <button class="tab-button admin-only" data-tab="seasons">M√πa gi·∫£i</button>
          <button class="tab-button active" data-tab="rankings">X·∫øp h·∫°ng</button>
        </div>

        <!-- Players Tab -->
        <div class="tab-content" id="players-tab">
          <div class="section admin-only">
            <h2>Th√™m ng∆∞·ªùi ch∆°i m·ªõi</h2>
            <div class="form-group">
              <input type="text" id="playerName" placeholder="T√™n ng∆∞·ªùi ch∆°i" />
              <button id="addPlayer">Th√™m</button>
            </div>
          </div>

          <div class="section">
            <div class="section-header">
              <h2>Danh s√°ch ng∆∞·ªùi ch∆°i</h2>
            </div>
            <div id="playersList" class="players-grid"></div>
          </div>
        </div>

        <!-- Matches Tab -->
        <div class="tab-content" id="matches-tab">
          <div class="section">
            <div class="section-header">
              <h2>Ghi nh·∫≠n k·∫øt qu·∫£ tr·∫≠n ƒë·∫•u</h2>
              <button id="addMatchModal" class="add-btn admin-only">‚ûï Th√™m tr·∫≠n ƒë·∫•u</button>
            </div>
            <div class="match-form">
              <div class="form-row">
                <div class="form-group">
                  <label for="matchDate">Ng√†y ƒë√°nh:</label>
                  <input type="date" id="matchDate" required>
                </div>
                <div class="form-group">
                  <label for="matchSeason">M√πa gi·∫£i:</label>
                  <select id="matchSeason" required>
                    <option value="">Ch·ªçn m√πa gi·∫£i</option>
                  </select>
                </div>
              </div>
              
              <div class="teams-container">
                <div class="team-section">
                  <h3>ƒê·ªôi 1</h3>
                  <div class="team-players">
                    <select id="player1">
                      <option value="">Ch·ªçn ng∆∞·ªùi ch∆°i 1</option>
                    </select>
                    <select id="player2">
                      <option value="">Ch·ªçn ng∆∞·ªùi ch∆°i 2</option>
                    </select>
                  </div>
                  <div class="team-score">
                    <label>ƒêi·ªÉm:</label>
                    <input type="number" id="team1Score" min="0" placeholder="0" required>
                  </div>
                </div>
                
                <div class="vs">VS</div>
                
                <div class="team-section">
                  <h3>ƒê·ªôi 2</h3>
                  <div class="team-players">
                    <select id="player3">
                      <option value="">Ch·ªçn ng∆∞·ªùi ch∆°i 1</option>
                    </select>
                    <select id="player4">
                      <option value="">Ch·ªçn ng∆∞·ªùi ch∆°i 2</option>
                    </select>
                  </div>
                  <div class="team-score">
                    <label>ƒêi·ªÉm:</label>
                    <input type="number" id="team2Score" min="0" placeholder="0" required>
                  </div>
                </div>
              </div>

              <div class="winner-section">
                <div class="auto-winner">
                  <span id="winnerDisplay">Nh·∫≠p ƒëi·ªÉm s·ªë ƒë·ªÉ t·ª± ƒë·ªông x√°c ƒë·ªãnh ƒë·ªôi th·∫Øng</span>
                </div>
                <div class="manual-winner hidden">
                  <label>Ch·ªçn ƒë·ªôi th·∫Øng th·ªß c√¥ng:</label>
                  <select id="winningTeam">
                    <option value="">Ch·ªçn ƒë·ªôi th·∫Øng</option>
                    <option value="1">ƒê·ªôi 1</option>
                    <option value="2">ƒê·ªôi 2</option>
                  </select>
                  <button type="button" id="useAutoWinner" class="small-btn">D√πng t·ª± ƒë·ªông</button>
                </div>
                <button type="button" id="useManualWinner" class="small-btn">Ch·ªçn th·ªß c√¥ng</button>
              </div>

              <button id="recordMatch" class="record-btn">üìù Ghi nh·∫≠n k·∫øt qu·∫£</button>
            </div>
          </div>
        </div>

        <!-- Seasons Tab -->
        <div class="tab-content" id="seasons-tab">
          <div class="section admin-only">
            <div class="section-header">
              <h2>Qu·∫£n l√Ω m√πa gi·∫£i</h2>
              <button id="addSeason" class="add-btn">‚ûï T·∫°o m√πa gi·∫£i m·ªõi</button>
            </div>
            <div id="seasonsList" class="seasons-grid"></div>
          </div>
        </div>

        <!-- Rankings Tab -->
        <div class="tab-content active" id="rankings-tab">
          <div class="section">
            <div class="section-header">
              <h2>B·∫£ng x·∫øp h·∫°ng</h2>
              <button id="exportRankings" class="export-btn">üìä Xu·∫•t Excel</button>
            </div>
            
            <!-- View Mode Selection -->
            <div class="view-mode-section">
              <div class="view-mode-buttons">
                <button id="viewModeDaily" class="view-mode-btn active">üìÖ Theo ng√†y ƒë√°nh</button>
                <button id="viewModeSeason" class="view-mode-btn">üèÜ Theo m√πa gi·∫£i</button>
                <button id="viewModeLifetime" class="view-mode-btn">‚è≥ T·ªïng (to√†n th·ªùi gian)</button>
              </div>
              
              <div class="view-controls">
                <div id="dateSelectContainer" class="control-group">
                  <label for="dateSelector">Ch·ªçn ng√†y ƒë√°nh:</label>
                  <select id="dateSelector"></select>
                </div>
                
                <div id="seasonSelectContainer" class="control-group hidden">
                  <label for="seasonSelector">Ch·ªçn m√πa gi·∫£i:</label>
                  <select id="seasonSelector"></select>
                </div>
              </div>
            </div>
            
            <div class="current-view">
              <h3 id="currentViewMode">B·∫£ng x·∫øp h·∫°ng theo ng√†y ƒë√°nh g·∫ßn nh·∫•t</h3>
            </div>

            <div class="rankings-container">
              <table id="rankingsTable" class="rankings-table">
                <thead>
                  <tr>
                    <th>H·∫°ng</th>
                    <th>T√™n</th>
                    <th>Th·∫Øng</th>
                    <th>Thua</th>
                    <th>T·ªïng tr·∫≠n</th>
                    <th>ƒêi·ªÉm</th>
                    <th>T·ª∑ l·ªá th·∫Øng</th>
                    <th>Ti·ªÅn thua</th>
                    <th>Phong ƒë·ªô</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
            
            <!-- Matches for current view -->
            <div class="matches-for-view">
              <h3>K·∫øt qu·∫£ c√°c tr·∫≠n trong ng√†y/m√πa gi·∫£i n√†y</h3>
              <div id="matchHistory" class="match-history"></div>
            </div>
          </div>
        </div>
      </main>

      <!-- Guest info box -->
      <div class="guest-info">
        <h3>üîç Ch·∫ø ƒë·ªô xem</h3>
        <p>B·∫°n ƒëang ·ªü ch·∫ø ƒë·ªô xem. C√≥ th·ªÉ xem b·∫£ng x·∫øp h·∫°ng v√† l·ªãch s·ª≠ thi ƒë·∫•u.</p>
        <p>ƒê·ªÉ th√™m ng∆∞·ªùi ch∆°i v√† ghi nh·∫≠n k·∫øt qu·∫£, vui l√≤ng ƒëƒÉng nh·∫≠p.</p>
      </div>

      <!-- Status message -->
      <div id="fileStatus" class="status-message"></div>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
